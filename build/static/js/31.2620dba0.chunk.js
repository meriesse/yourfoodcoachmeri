(this.webpackJsonpyourfoodcoach=this.webpackJsonpyourfoodcoach||[]).push([[31],{507:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return z}));var c=t(0),s=t(309),n=t(187),r=t(310),o=t(341),i=t(79),l=t(335),d=t(325),j=t(14),m=t(7),b=t(29),u=t(37),h=t(30),g=t(20),x=t(13),O=t(405),p=t(303),f=t(321),y=t(80),w=t(19),N=t(1);function z(){const{currentUser:e}=Object(h.b)(),[a,t]=Object(c.useState)([]),[z,v]=Object(c.useState)(""),[C,L]=Object(c.useState)(!0),[S,k]=Object(c.useState)(1),[P,T]=Object(c.useState)(""),[B,q]=Object(c.useState)(""),E=Object(m.D)();Object(c.useEffect)((()=>{(async()=>{L(!0);try{const a=(await Object(b.f)(Object(b.b)(u.b,"users"))).docs.find((a=>a.data().email===e.email));if(a){const e=a.data().pazienti||[],c=[];for(const a of e){const e=Object(b.i)(Object(b.b)(u.b,"users"),Object(b.m)("cf_paz","==",a));k(1);try{const a=await Object(b.f)(e);if(!a.empty){const e=a.docs[0].data();c.push(e)}}catch(P){console.error("Errore durante la query del paziente:",P.message)}}t(c)}else console.log("Nessun nutrizionista trovato con l'email corrente")}catch(P){console.error("Errore durante la query degli utenti:",P.message)}L(!1)})()}),[e]);const F=a.filter((e=>""===z.toLowerCase()||e.nome.toLowerCase().includes(z.toLowerCase())||e.cognome.toLowerCase().includes(z.toLowerCase())||e.cf_paz.toLowerCase().includes(z.toLowerCase())));return!0===C?Object(N.jsx)(y.a,{}):Object(N.jsx)(N.Fragment,{children:!1===C&&Object(N.jsx)(j.a,{className:"modal-fullscreen",style:{background:"linear-gradient(123deg, rgba(247,209,98,1) 30%, rgba(251,149,96,1) 50%, rgba(254,88,94,1) 70%)",backgroundSize:"cover",minHeight:"inherit",padding:0},children:Object(N.jsx)(j.a,{className:"modal-fullscreen text-center",children:Object(N.jsx)(j.a,{className:"d-flex flex-column mx-auto my-auto",style:{minHeight:450,marginTop:20},children:Object(N.jsxs)(s.a,{className:"col-12 col-md-10 mx-auto",style:{marginTop:20,marginBottom:20,borderRadius:16,boxShadow:"10px 10px 10px rgba(30,30,30,0.5)",borderLeft:"solid 1px rgba(255,255,255,0.8)",borderTop:"solid 1px rgba(255,255,255,0.8)"},children:[Object(N.jsx)("h2",{style:{fontFamily:"Arial",marginTop:10},children:"I tuoi pazienti"}),Object(N.jsx)("div",{className:"d-flex my-auto col-12",children:Object(N.jsx)("div",{className:"col-12",children:Object(N.jsx)("div",{className:"float-start",style:{marginTop:10,marginLeft:20},children:Object(N.jsx)(x.LinkContainer,{to:"/dashboard",className:"my-auto",children:Object(N.jsx)(n.a,{style:{height:40,width:100},variant:"warning",children:Object(N.jsx)(g.a,{icon:w.a,color:"black"})})})})})}),P&&!a&&Object(N.jsx)(r.a,{variant:"danger",children:P}),B&&Object(N.jsx)(r.a,{style:{margin:20},variant:"primary",onClose:()=>q(!1),dismissible:!0,children:B}),Object(N.jsx)(p.a,{color:"#eb6164",loading:C,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1}}),Object(N.jsx)(j.a,{style:{minHeight:500},children:Object(N.jsxs)(o.a,{className:"d-flex col-12 col-md-12 mx-auto",style:{marginBottom:20},children:[Object(N.jsx)(i.a,{expand:"lg",className:"justify-content-evenly",children:Object(N.jsxs)(j.a,{className:"col-12",children:[Object(N.jsx)(j.a,{className:"col-12 col-md-6",style:{marginBottom:10},children:Object(N.jsx)(l.a,{className:"d-flex",children:Object(N.jsx)(d.a.Control,{type:"search",placeholder:"Cerca...",className:"me-2","aria-label":"Search",value:z,onChange:e=>{k(1),v(e.target.value)}})})}),Object(N.jsx)(j.a,{className:"col-6 col-md-3 d-inline-block",style:{marginBottom:10,padding:0},children:Object(N.jsxs)(n.a,{variant:"outline-danger",className:"flex-wrap",onClick:()=>E("/inserisci-paziente",{replace:!0}),children:[Object(N.jsx)(g.a,{icon:w.q,style:{marginRight:5}}),"Inserisci paziente"]})})]})}),F.map((e=>Object(N.jsx)(O.a,{id:e.id,nomePaziente:e.nome,cognomePaziente:e.cognome,codiceFiscalePaziente:e.cf_paz},e.email))),0===a.length&&!C&&Object(N.jsx)(r.a,{variant:"warning",children:"Non hai inserito ancora nessun paziente"}),0===F.length&&a.length>0&&!C&&Object(N.jsx)(r.a,{variant:"warning",children:"Nessun paziente soddisfa i parametri di ricerca"})]})}),Object(N.jsx)(j.a,{className:"d-flex flex-wrap justify-content-center mt-auto",children:0!==a.length&&Object(N.jsx)(f.a,{itemsCount:F.length,itemsPerPage:10,currentPage:S,setCurrentPage:k,alwaysShown:!0})})]})})})})})}}}]);
//# sourceMappingURL=31.2620dba0.chunk.js.map