{"code":"(this.webpackJsonpyourfoodcoach=this.webpackJsonpyourfoodcoach||[]).push([[32],{506:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"default\",(function(){return v}));var c=a(0),s=a(309),n=a(187),i=a(310),l=a(341),o=a(79),r=a(326),d=a(339),j=a(14),m=a(185),b=a(28),g=a(37),h=a(303),x=a(321),u=a(406),O=a(30),p=a(80),f=a(54),y=a(13),w=a(20),N=a(19),C=a(1);function v(){const{currentUser:e}=Object(O.b)(),[t,a]=Object(c.useState)(\"\"),[v,S]=Object(c.useState)(\"\"),[z,_]=Object(c.useState)(!0),[L,k]=Object(c.useState)(1),[P,F]=Object(c.useState)(\"\"),[T,D]=Object(c.useState)(!1),[H,B]=Object(c.useState)([]),R=5*L,I=R-5;Object(c.useEffect)((()=>{Object(f.a)();(async()=>{_(!0),await Object(b.f)(Object(b.i)(Object(b.b)(g.b,\"diets\"),Object(b.m)(\"email_nutrizionista\",\"==\",e.email),Object(b.h)(\"data_inserimento\",\"desc\"))).then((e=>{B(e.docs.map((e=>({...e.data(),id:e.id})))),k(1)})).catch((e=>a(\"Si \\xe8 verificato un errore inaspettato\"))).finally((()=>_(!1)))})()}),[]);const J=new Date,A=H.filter((e=>\"\"===P.toLowerCase()?e:e.nome_paziente.toLowerCase().includes(P.toLowerCase())||e.cognome_paziente.toLowerCase().includes(P.toLowerCase())||e.codice_fiscale_paziente.toLowerCase().includes(P.toLowerCase()))).filter((e=>{const t=new Date(e.data_fine_dieta);return T?J>t:e}));return!0===z?Object(C.jsx)(p.a,{}):Object(C.jsx)(C.Fragment,{children:!1===z&&Object(C.jsx)(j.a,{className:\"modal-fullscreen\",style:{background:\"linear-gradient(123deg, rgba(247,209,98,1) 30%, rgba(251,149,96,1) 50%, rgba(254,88,94,1) 70%)\",backgroundSize:\"cover\",minHeight:\"inherit\",padding:0},children:Object(C.jsx)(j.a,{className:\"modal-fullscreen text-center\",children:Object(C.jsx)(j.a,{className:\"d-flex flex-column mx-auto my-auto\",style:{minHeight:450,marginTop:20},children:Object(C.jsxs)(s.a,{className:\"col-12 col-md-9 mx-auto\",style:{marginTop:20,marginBottom:20,borderRadius:16,boxShadow:\"10px 10px 10px rgba(30,30,30,0.5)\",borderLeft:\"solid 1px rgba(255,255,255,0.8)\",borderTop:\"solid 1px rgba(255,255,255,0.8)\"},children:[Object(C.jsxs)(\"h2\",{style:{fontFamily:\"Arial\",marginTop:10},children:[Object(C.jsx)(\"div\",{className:\"d-flex my-auto col-12\",children:Object(C.jsx)(\"div\",{className:\"col-12\",children:Object(C.jsx)(\"div\",{className:\"float-start\",style:{marginTop:10,marginLeft:20},children:Object(C.jsx)(y.LinkContainer,{to:\"/dashboard\",className:\"my-auto\",children:Object(C.jsx)(n.a,{style:{height:40,width:100},variant:\"warning\",children:Object(C.jsx)(w.a,{icon:N.a,color:\"black\"})})})})})}),Object(C.jsxs)(j.a,{className:\"d-flex justify-content-center my-auto align-items-center col-12\",style:{padding:0},children:[Object(C.jsx)(\"img\",{src:m.a,id:\"ShowDietsImg\",style:{height:70,width:70,marginRight:10},alt:\"Progressi\"}),Object(C.jsx)(\"p\",{className:\"my-auto\",children:\"Progressi\"})]})]}),t&&!H&&Object(C.jsx)(i.a,{variant:\"danger\",children:t}),v&&Object(C.jsx)(i.a,{style:{margin:20},variant:\"primary\",onClose:()=>S(!1),dismissible:!0,children:v}),Object(C.jsx)(h.a,{color:\"#eb6164\",loading:z,style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:1}}),Object(C.jsx)(j.a,{style:{minHeight:500},children:Object(C.jsxs)(l.a,{className:\"col-12 col-md-11 mx-auto\",style:{marginBottom:20,minHeight:500},children:[Object(C.jsxs)(o.a,{expand:\"lg\",className:\"justify-content-end gap-2\",style:{marginBottom:10},children:[Object(C.jsx)(r.a,{className:\"col-7 col-lg-5 col-xl-4 d-inline-block flex-wrap mx-auto\",style:{marginRight:15},children:Object(C.jsx)(r.a.Check,{type:\"switch\",id:\"custom-switch\",label:\"Diete scadute\",checked:T,onChange:()=>{D(!T),k(1)}})}),Object(C.jsx)(j.a,{className:\"col-12 col-sm-12 col-lg-5\",style:{margin:0,padding:0},children:Object(C.jsx)(d.a,{className:\"d-flex \",children:Object(C.jsx)(r.a.Control,{type:\"search\",placeholder:\"Cerca...\",className:\"me-2\",\"aria-label\":\"Search\",value:P,onChange:e=>{k(1),F(e.target.value)}})})})]}),A.slice(I,R).map((e=>Object(C.jsx)(u.a,{id:e.id,nomePaziente:e.nome_paziente,cognomePaziente:e.cognome_paziente,codiceFiscalePaziente:e.codice_fiscale_paziente},e.id))),0!==H.length||t?Object(C.jsx)(C.Fragment,{}):Object(C.jsx)(i.a,{variant:\"warning\",style:{margin:30},children:\"Non hai inserito ancora nessuna dieta\"}),0===A.length&&!t&&H.length>0?Object(C.jsx)(i.a,{variant:\"warning\",style:{margin:30},children:\"Non ci sono al momento diete scadute\"}):Object(C.jsx)(C.Fragment,{})]})}),Object(C.jsx)(j.a,{className:\"d-flex flex-wrap justify-content-center mt-auto\",children:0!==H.length&&Object(C.jsx)(x.a,{itemsCount:A.length,itemsPerPage:5,currentPage:L,setCurrentPage:k,alwaysShown:!0})})]})})})})})}}}]);","name":"static/js/32.c46ff61f.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","ShowPatients","react__WEBPACK_IMPORTED_MODULE_0__","react_bootstrap__WEBPACK_IMPORTED_MODULE_1__","react_bootstrap__WEBPACK_IMPORTED_MODULE_2__","react_bootstrap__WEBPACK_IMPORTED_MODULE_3__","react_bootstrap__WEBPACK_IMPORTED_MODULE_4__","react_bootstrap__WEBPACK_IMPORTED_MODULE_5__","react_bootstrap__WEBPACK_IMPORTED_MODULE_6__","react_bootstrap__WEBPACK_IMPORTED_MODULE_7__","react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__","_img_AllProgressImg_svg__WEBPACK_IMPORTED_MODULE_9__","firebase_firestore__WEBPACK_IMPORTED_MODULE_10__","_config_firebase_config__WEBPACK_IMPORTED_MODULE_11__","react_spinners__WEBPACK_IMPORTED_MODULE_12__","_Utilities_Pagination__WEBPACK_IMPORTED_MODULE_13__","_PatientPreview__WEBPACK_IMPORTED_MODULE_14__","_context_AuthContext__WEBPACK_IMPORTED_MODULE_15__","_Utilities_Spinner__WEBPACK_IMPORTED_MODULE_16__","_helpers_scroll__WEBPACK_IMPORTED_MODULE_17__","react_router_bootstrap__WEBPACK_IMPORTED_MODULE_18__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_19__","_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_20__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__","currentUser","Object","error","setError","success","setSuccess","progress","setProgress","currentPage","setCurrentPage","searchInput","setSearchInput","showExpired","setShowExpired","diets","setDiets","lastDietNumber","firstDietIndex","async","email","then","querySnapshot","docs","map","doc","data","id","catch","finally","getDiets","currentData","Date","filtered","filter","diet","toLowerCase","nome_paziente","includes","cognome_paziente","codice_fiscale_paziente","dataFineDieta","data_fine_dieta","children","className","style","background","backgroundSize","minHeight","padding","marginTop","marginBottom","borderRadius","boxShadow","borderLeft","borderTop","fontFamily","marginLeft","to","height","width","variant","icon","color","src","marginRight","alt","margin","onClose","dismissible","loading","position","top","left","transform","zIndex","expand","Check","type","label","checked","onChange","Control","placeholder","value","e","target","slice","nomePaziente","cognomePaziente","codiceFiscalePaziente","length","itemsCount","itemsPerPage","alwaysShown"],"sources":["static/js/32.c46ff61f.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonpyourfoodcoach\"] = this[\"webpackJsonpyourfoodcoach\"] || []).push([[32],{\n\n/***/ 506:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ShowPatients; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(309);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(187);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(310);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(341);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(326);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(339);\n/* harmony import */ var react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(14);\n/* harmony import */ var _img_AllProgressImg_svg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(185);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(28);\n/* harmony import */ var _config_firebase_config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(37);\n/* harmony import */ var react_spinners__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(303);\n/* harmony import */ var _Utilities_Pagination__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(321);\n/* harmony import */ var _PatientPreview__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(406);\n/* harmony import */ var _context_AuthContext__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(30);\n/* harmony import */ var _Utilities_Spinner__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(80);\n/* harmony import */ var _helpers_scroll__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(54);\n/* harmony import */ var react_router_bootstrap__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(13);\n/* harmony import */ var react_router_bootstrap__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(20);\n/* harmony import */ var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(19);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(1);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__);\n/*\n Funzione che si occupa di mostrare un elenco contenente tutte i pazienti con una dieta attiva\n Gli elementi vengono impaginati in modo tale che ce ne siano 5 per pagina\n */function ShowPatients(){const{currentUser}=Object(_context_AuthContext__WEBPACK_IMPORTED_MODULE_15__[/* useAuth */ \"b\"])();const[error,setError]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");const[success,setSuccess]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");const[progress,setProgress]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);//Numero di diete visualizzate per pagina\nconst dietsPerPage=5;const[currentPage,setCurrentPage]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(1);const[searchInput,setSearchInput]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");const[showExpired,setShowExpired]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);const[diets,setDiets]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]);const lastDietNumber=currentPage*dietsPerPage;const firstDietIndex=lastDietNumber-dietsPerPage;Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(()=>{//Ad ogni caricamento la pagina effettua uno scroll fino al suo inizio\nObject(_helpers_scroll__WEBPACK_IMPORTED_MODULE_17__[/* scrollToTop */ \"a\"])();const getDiets=async()=>{setProgress(true);await Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* getDocs */ \"f\"])(Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* query */ \"i\"])(Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* collection */ \"b\"])(_config_firebase_config__WEBPACK_IMPORTED_MODULE_11__[/* db */ \"b\"],\"diets\"),Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* where */ \"m\"])(\"email_nutrizionista\",\"==\",currentUser.email),Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* orderBy */ \"h\"])(\"data_inserimento\",\"desc\"))).then(querySnapshot=>{setDiets(querySnapshot.docs.map(doc=>({...doc.data(),id:doc.id})));setCurrentPage(1);}).catch(error=>setError(\"Si è verificato un errore inaspettato\")).finally(()=>setProgress(false));};getDiets();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);//Ottengo la data corrente es. 2022-08-12\nconst currentData=new Date();const filtered=diets.filter(//Funzione di ricerca: cerca la stringa data in input in Nome, Cognome e Codice Fiscale\ndiet=>{return searchInput.toLowerCase()===\"\"?diet:diet.nome_paziente.toLowerCase().includes(searchInput.toLowerCase())||diet.cognome_paziente.toLowerCase().includes(searchInput.toLowerCase())||diet.codice_fiscale_paziente.toLowerCase().includes(searchInput.toLowerCase());}).filter(//Funzione di ricerca diete scadute:\ndiet=>{//Converto stringa in oggetto date\nconst dataFineDieta=new Date(diet.data_fine_dieta);return showExpired?currentData>dataFineDieta:diet;});if(progress===true){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(_Utilities_Spinner__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"],{});}return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"Fragment\"],{children:progress===false&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"modal-fullscreen\",style:{background:\"linear-gradient(123deg, rgba(247,209,98,1) 30%, rgba(251,149,96,1) 50%, rgba(254,88,94,1) 70%)\",backgroundSize:\"cover\",minHeight:\"inherit\",padding:0},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"modal-fullscreen text-center\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"d-flex flex-column mx-auto my-auto\",style:{minHeight:450,marginTop:20},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"],{className:\"col-12 col-md-9 mx-auto\",style:{marginTop:20,marginBottom:20,borderRadius:16,boxShadow:\"10px 10px 10px rgba(30,30,30,0.5)\",borderLeft:\"solid 1px rgba(255,255,255,0.8)\",borderTop:\"solid 1px rgba(255,255,255,0.8)\"},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsxs\"])(\"h2\",{style:{fontFamily:\"Arial\",marginTop:10},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(\"div\",{className:\"d-flex my-auto col-12\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(\"div\",{className:\"col-12\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(\"div\",{className:\"float-start\",style:{marginTop:10,marginLeft:20},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_18__[\"LinkContainer\"],{to:\"/dashboard\",className:\"my-auto\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"],{style:{height:40,width:100},variant:\"warning\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_19__[/* FontAwesomeIcon */ \"a\"],{icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_20__[/* faAngleLeft */ \"a\"],color:\"black\"})})})})})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsxs\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"d-flex justify-content-center my-auto align-items-center col-12\",style:{padding:0},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(\"img\",{src:_img_AllProgressImg_svg__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"],id:\"ShowDietsImg\",style:{height:70,width:70,marginRight:10},alt:\"Progressi\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(\"p\",{className:\"my-auto\",children:\"Progressi\"})]})]}),error&&!diets&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{variant:\"danger\",children:error}),success&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{style:{margin:20},variant:\"primary\",onClose:()=>setSuccess(false),dismissible:true,children:success}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_spinners__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"],{color:\"#eb6164\",loading:progress,style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:1}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{style:{minHeight:500},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"],{className:\"col-12 col-md-11 mx-auto\",style:{marginBottom:20,minHeight:500},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"],{expand:\"lg\",className:\"justify-content-end gap-2\",style:{marginBottom:10},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"],{className:\"col-7 col-lg-5 col-xl-4 d-inline-block flex-wrap mx-auto\",style:{marginRight:15},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Check,{type:\"switch\",id:\"custom-switch\",label:\"Diete scadute\",checked:showExpired,onChange:()=>{setShowExpired(!showExpired);setCurrentPage(1);}})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"col-12 col-sm-12 col-lg-5\",style:{margin:0,padding:0},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"],{className:\"d-flex \",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Control,{type:\"search\",placeholder:\"Cerca...\",className:\"me-2\",\"aria-label\":\"Search\",value:searchInput,onChange:e=>{setCurrentPage(1);setSearchInput(e.target.value);}})})})]}),filtered.slice(firstDietIndex,lastDietNumber).map(diet=>/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(_PatientPreview__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"],{id:diet.id,nomePaziente:diet.nome_paziente,cognomePaziente:diet.cognome_paziente,codiceFiscalePaziente:diet.codice_fiscale_paziente},diet.id)),diets.length===0&&!error?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{variant:\"warning\",style:{margin:30},children:\"Non hai inserito ancora nessuna dieta\"}):/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"Fragment\"],{}),filtered.length===0&&!error&&diets.length>0?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{variant:\"warning\",style:{margin:30},children:\"Non ci sono al momento diete scadute\"}):/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"Fragment\"],{})]})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"d-flex flex-wrap justify-content-center mt-auto\",children:diets.length!==0&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__[\"jsx\"])(_Utilities_Pagination__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"],{itemsCount:filtered.length,itemsPerPage:dietsPerPage,currentPage:currentPage,setCurrentPage:setCurrentPage,alwaysShown:true})})]})})})})});}\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/angelamariaselvaggi/Desktop/unimeri/Tesi/Applicazione/APP MERI/src/Components/Progress/ShowPatients.js"],"names":["ShowPatients","currentUser","useAuth","error","setError","useState","success","setSuccess","progress","setProgress","dietsPerPage","currentPage","setCurrentPage","searchInput","setSearchInput","showExpired","setShowExpired","diets","setDiets","lastDietNumber","firstDietIndex","useEffect","scrollToTop","getDiets","getDocs","query","collection","db","where","email","orderBy","then","querySnapshot","docs","map","doc","data","id","catch","finally","currentData","Date","filtered","filter","diet","toLowerCase","nome_paziente","includes","cognome_paziente","codice_fiscale_paziente","dataFineDieta","data_fine_dieta","_jsx","Spinner","_Fragment","children","Container","className","style","background","backgroundSize","minHeight","padding","marginTop","_jsxs","Card","marginBottom","borderRadius","boxShadow","borderLeft","borderTop","fontFamily","marginLeft","LinkContainer","to","Button","height","width","variant","FontAwesomeIcon","icon","faAngleLeft","color","src","AllProgressiImg","marginRight","alt","Alert","margin","onClose","dismissible","SyncLoader","loading","position","top","left","transform","zIndex","ListGroup","Navbar","expand","Form","Check","type","label","checked","onChange","InputGroup","Control","placeholder","value","e","target","slice","PatientPreview","nomePaziente","cognomePaziente","codiceFiscalePaziente","length","Pagination","itemsCount","itemsPerPage","alwaysShown"],"mappings":"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","file":"x","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Alert, Button, Card, Form, InputGroup, ListGroup, Navbar} from \"react-bootstrap\";\nimport Container from \"react-bootstrap/Container\";\nimport AllProgressiImg from \"../../img/AllProgressImg.svg\";\nimport {collection, getDocs, orderBy, query, where} from \"firebase/firestore\";\nimport {db} from \"../../config/firebase-config\";\nimport {SyncLoader} from \"react-spinners\";\nimport Pagination from \"../Utilities/Pagination\";\nimport PatientPreview from \"./PatientPreview\";\nimport {useAuth} from \"../../context/AuthContext\";\nimport Spinner from \"../Utilities/Spinner\";\nimport {scrollToTop} from \"../helpers/scroll\";\nimport {LinkContainer} from \"react-router-bootstrap\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faAngleLeft} from \"@fortawesome/free-solid-svg-icons\";\n\n/*\n Funzione che si occupa di mostrare un elenco contenente tutte i pazienti con una dieta attiva\n Gli elementi vengono impaginati in modo tale che ce ne siano 5 per pagina\n */\nexport default function ShowPatients() {\n    const {currentUser} = useAuth();\n    const [error, setError] = useState(\"\");\n    const [success, setSuccess] = useState(\"\");\n    const [progress, setProgress] = useState(true);\n    //Numero di diete visualizzate per pagina\n    const dietsPerPage = 5;\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchInput, setSearchInput] = useState(\"\");\n    const [showExpired, setShowExpired] = useState(false);\n    const [diets, setDiets] = useState([]);\n    const lastDietNumber = currentPage * dietsPerPage;\n    const firstDietIndex = lastDietNumber - dietsPerPage;\n\n    useEffect(() => {\n        //Ad ogni caricamento la pagina effettua uno scroll fino al suo inizio\n        scrollToTop();\n        const getDiets = async () => {\n            setProgress(true);\n            await getDocs(query(collection(db, \"diets\"),\n                where(\"email_nutrizionista\", \"==\", currentUser.email),\n                orderBy(\"data_inserimento\", \"desc\")))\n                .then((querySnapshot) => {\n                    setDiets(querySnapshot.docs.map((doc) => ({...doc.data(), id: doc.id})));\n                    setCurrentPage(1);\n                }).catch((error) => setError(\"Si è verificato un errore inaspettato\"))\n                .finally(() => setProgress(false));\n        };\n        getDiets();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    //Ottengo la data corrente es. 2022-08-12\n    const currentData = new Date();\n\n    const filtered = diets.filter(\n        //Funzione di ricerca: cerca la stringa data in input in Nome, Cognome e Codice Fiscale\n        (diet) => {\n            return searchInput.toLowerCase() === \"\" ? diet\n                : diet.nome_paziente.toLowerCase().includes(searchInput.toLowerCase())\n                || diet.cognome_paziente.toLowerCase().includes(searchInput.toLowerCase())\n                || diet.codice_fiscale_paziente.toLowerCase().includes(searchInput.toLowerCase());\n        }\n    ).filter(\n        //Funzione di ricerca diete scadute:\n        (diet) => {\n            //Converto stringa in oggetto date\n            const dataFineDieta = new Date(diet.data_fine_dieta);\n            return showExpired ? currentData > dataFineDieta : diet;\n        });\n\n    if (progress === true) {\n        return <Spinner/>;\n    }\n\n\n    return (\n        <>\n            {progress === false && <Container className={\"modal-fullscreen\"}\n                                              style={{\n                                                  background: \"linear-gradient(123deg, rgba(247,209,98,1) 30%, rgba(251,149,96,1) 50%, rgba(254,88,94,1) 70%)\",\n                                                  backgroundSize: \"cover\",\n                                                  minHeight: \"inherit\",\n                                                  padding: 0\n                                              }}>\n                <Container className={\"modal-fullscreen text-center\"}>\n                    <Container className={\"d-flex flex-column mx-auto my-auto\"}\n                               style={{minHeight: 450, marginTop: 20}}>\n                        <Card className={\"col-12 col-md-9 mx-auto\"}\n                              style={{\n                                  marginTop: 20,\n                                  marginBottom: 20,\n                                  borderRadius: 16,\n                                  boxShadow: \"10px 10px 10px rgba(30,30,30,0.5)\",\n                                  borderLeft: \"solid 1px rgba(255,255,255,0.8)\",\n                                  borderTop: \"solid 1px rgba(255,255,255,0.8)\"\n                              }}>\n                            <h2 style={{fontFamily: \"Arial\", marginTop: 10}}>\n                                <div className={\"d-flex my-auto col-12\"}>\n                                    <div className={\"col-12\"}>\n                                        <div className={\"float-start\"}\n                                             style={{marginTop: 10, marginLeft: 20}}>\n                                            <LinkContainer to=\"/dashboard\"\n                                                           className={\"my-auto\"}>\n                                                <Button style={{height: 40, width: 100}}\n                                                        variant={\"warning\"}\n                                                ><FontAwesomeIcon icon={faAngleLeft}\n                                                                  color={\"black\"}/></Button>\n                                            </LinkContainer>\n                                        </div>\n                                    </div>\n                                </div>\n                                <Container className={\"d-flex justify-content-center my-auto align-items-center col-12\"}\n                                           style={{padding: 0}}>\n                                    <img src={AllProgressiImg}\n                                         id={\"ShowDietsImg\"}\n                                         style={{height: 70, width: 70, marginRight: 10}}\n                                         alt={\"Progressi\"}/>\n                                    <p className={\"my-auto\"}>Progressi</p>\n                                </Container>\n                            </h2>\n                            {error && !diets && <Alert variant=\"danger\">{error}</Alert>}\n                            {success && <Alert style={{margin: 20}}\n                                               variant=\"primary\"\n                                               onClose={() => setSuccess(false)}\n                                               dismissible={true}>{success}</Alert>}\n                            <SyncLoader color=\"#eb6164\"\n                                        loading={progress}\n                                        style={{\n                                            position: \"absolute\",\n                                            top: \"50%\",\n                                            left: \"50%\",\n                                            transform: \"translate(-50%, -50%)\",\n                                            zIndex: 1\n                                        }}/>\n                            <Container style={{minHeight: 500}}>\n                                <ListGroup className={\"col-12 col-md-11 mx-auto\"}\n                                           style={{\n                                               marginBottom: 20,\n                                               minHeight: 500\n                                           }}>\n                                    <Navbar expand=\"lg\"\n                                            className={\"justify-content-end gap-2\"}\n                                            style={{marginBottom: 10}}>\n                                        <Form className={\"col-7 col-lg-5 col-xl-4 d-inline-block flex-wrap mx-auto\"}\n                                              style={{marginRight: 15}}>\n                                            <Form.Check\n                                                type=\"switch\"\n                                                id=\"custom-switch\"\n                                                label=\"Diete scadute\"\n                                                checked={showExpired}\n                                                onChange={() => {\n                                                    setShowExpired(!showExpired);\n                                                    setCurrentPage(1);\n                                                }}\n                                            />\n                                        </Form>\n                                        <Container className={\"col-12 col-sm-12 col-lg-5\"}\n                                                   style={{margin: 0, padding: 0}}>\n                                            <InputGroup className=\"d-flex \">\n                                                <Form.Control\n                                                    type=\"search\"\n                                                    placeholder={\"Cerca...\"}\n                                                    className={\"me-2\"}\n                                                    aria-label=\"Search\"\n                                                    value={searchInput}\n                                                    onChange={(e) => {\n                                                        setCurrentPage(1);\n                                                        setSearchInput(e.target.value);\n                                                    }}\n                                                />\n                                            </InputGroup>\n                                        </Container>\n                                    </Navbar>\n                                    {filtered.slice(firstDietIndex, lastDietNumber)\n                                             .map((diet) =>\n                                                 <PatientPreview key={diet.id}\n                                                                 id={diet.id}\n                                                                 nomePaziente={diet.nome_paziente}\n                                                                 cognomePaziente={diet.cognome_paziente}\n                                                                 codiceFiscalePaziente={diet.codice_fiscale_paziente}\n                                                 />)}\n                                    {diets.length === 0 && !error\n                                        ? (<Alert variant={\"warning\"}\n                                                  style={{margin: 30}}>Non hai inserito ancora nessuna\n                                                                       dieta</Alert>)\n                                        : (<></>)\n                                    }\n                                    {filtered.length === 0 && !error && diets.length > 0\n                                        ? (<Alert variant={\"warning\"}\n                                                  style={{margin: 30}}>Non ci sono al momento diete scadute</Alert>)\n                                        : (<></>)\n                                    }\n                                </ListGroup>\n                            </Container>\n                            <Container className={\"d-flex flex-wrap justify-content-center mt-auto\"}>\n                                {diets.length !== 0 && <Pagination\n                                    itemsCount={filtered.length}\n                                    itemsPerPage={dietsPerPage}\n                                    currentPage={currentPage}\n                                    setCurrentPage={setCurrentPage}\n                                    alwaysShown={true}\n                                />\n                                }\n                            </Container>\n                        </Card>\n                    </Container>\n                </Container>\n            </Container>\n            }\n        </>\n    );\n}\n"]}}