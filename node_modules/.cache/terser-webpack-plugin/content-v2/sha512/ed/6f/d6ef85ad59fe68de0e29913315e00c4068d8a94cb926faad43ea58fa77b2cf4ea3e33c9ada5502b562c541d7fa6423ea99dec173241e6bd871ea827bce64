{"code":"(this.webpackJsonpyourfoodcoach=this.webpackJsonpyourfoodcoach||[]).push([[31],{507:function(e,a,t){\"use strict\";t.r(a),t.d(a,\"default\",(function(){return z}));var c=t(0),s=t(309),n=t(187),r=t(310),o=t(341),i=t(79),l=t(335),d=t(325),j=t(14),m=t(7),b=t(29),u=t(37),h=t(30),g=t(20),x=t(13),O=t(405),p=t(303),f=t(321),y=t(80),w=t(19),N=t(1);function z(){const{currentUser:e}=Object(h.b)(),[a,t]=Object(c.useState)([]),[z,v]=Object(c.useState)(\"\"),[C,L]=Object(c.useState)(!0),[S,k]=Object(c.useState)(1),[P,T]=Object(c.useState)(\"\"),[B,q]=Object(c.useState)(\"\"),E=Object(m.D)();Object(c.useEffect)((()=>{(async()=>{L(!0);try{const a=(await Object(b.f)(Object(b.b)(u.b,\"users\"))).docs.find((a=>a.data().email===e.email));if(a){const e=a.data().pazienti||[],c=[];for(const a of e){const e=Object(b.i)(Object(b.b)(u.b,\"users\"),Object(b.m)(\"cf_paz\",\"==\",a));k(1);try{const a=await Object(b.f)(e);if(!a.empty){const e=a.docs[0].data();c.push(e)}}catch(P){console.error(\"Errore durante la query del paziente:\",P.message)}}t(c)}else console.log(\"Nessun nutrizionista trovato con l'email corrente\")}catch(P){console.error(\"Errore durante la query degli utenti:\",P.message)}L(!1)})()}),[e]);const F=a.filter((e=>\"\"===z.toLowerCase()||e.nome.toLowerCase().includes(z.toLowerCase())||e.cognome.toLowerCase().includes(z.toLowerCase())||e.cf_paz.toLowerCase().includes(z.toLowerCase())));return!0===C?Object(N.jsx)(y.a,{}):Object(N.jsx)(N.Fragment,{children:!1===C&&Object(N.jsx)(j.a,{className:\"modal-fullscreen\",style:{background:\"linear-gradient(123deg, rgba(247,209,98,1) 30%, rgba(251,149,96,1) 50%, rgba(254,88,94,1) 70%)\",backgroundSize:\"cover\",minHeight:\"inherit\",padding:0},children:Object(N.jsx)(j.a,{className:\"modal-fullscreen text-center\",children:Object(N.jsx)(j.a,{className:\"d-flex flex-column mx-auto my-auto\",style:{minHeight:450,marginTop:20},children:Object(N.jsxs)(s.a,{className:\"col-12 col-md-10 mx-auto\",style:{marginTop:20,marginBottom:20,borderRadius:16,boxShadow:\"10px 10px 10px rgba(30,30,30,0.5)\",borderLeft:\"solid 1px rgba(255,255,255,0.8)\",borderTop:\"solid 1px rgba(255,255,255,0.8)\"},children:[Object(N.jsx)(\"h2\",{style:{fontFamily:\"Arial\",marginTop:10},children:\"I tuoi pazienti\"}),Object(N.jsx)(\"div\",{className:\"d-flex my-auto col-12\",children:Object(N.jsx)(\"div\",{className:\"col-12\",children:Object(N.jsx)(\"div\",{className:\"float-start\",style:{marginTop:10,marginLeft:20},children:Object(N.jsx)(x.LinkContainer,{to:\"/dashboard\",className:\"my-auto\",children:Object(N.jsx)(n.a,{style:{height:40,width:100},variant:\"warning\",children:Object(N.jsx)(g.a,{icon:w.a,color:\"black\"})})})})})}),P&&!a&&Object(N.jsx)(r.a,{variant:\"danger\",children:P}),B&&Object(N.jsx)(r.a,{style:{margin:20},variant:\"primary\",onClose:()=>q(!1),dismissible:!0,children:B}),Object(N.jsx)(p.a,{color:\"#eb6164\",loading:C,style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:1}}),Object(N.jsx)(j.a,{style:{minHeight:500},children:Object(N.jsxs)(o.a,{className:\"d-flex col-12 col-md-12 mx-auto\",style:{marginBottom:20},children:[Object(N.jsx)(i.a,{expand:\"lg\",className:\"justify-content-evenly\",children:Object(N.jsxs)(j.a,{className:\"col-12\",children:[Object(N.jsx)(j.a,{className:\"col-12 col-md-6\",style:{marginBottom:10},children:Object(N.jsx)(l.a,{className:\"d-flex\",children:Object(N.jsx)(d.a.Control,{type:\"search\",placeholder:\"Cerca...\",className:\"me-2\",\"aria-label\":\"Search\",value:z,onChange:e=>{k(1),v(e.target.value)}})})}),Object(N.jsx)(j.a,{className:\"col-6 col-md-3 d-inline-block\",style:{marginBottom:10,padding:0},children:Object(N.jsxs)(n.a,{variant:\"outline-danger\",className:\"flex-wrap\",onClick:()=>E(\"/inserisci-paziente\",{replace:!0}),children:[Object(N.jsx)(g.a,{icon:w.q,style:{marginRight:5}}),\"Inserisci paziente\"]})})]})}),F.map((e=>Object(N.jsx)(O.a,{id:e.id,nomePaziente:e.nome,cognomePaziente:e.cognome,codiceFiscalePaziente:e.cf_paz},e.email))),0===a.length&&!C&&Object(N.jsx)(r.a,{variant:\"warning\",children:\"Non hai inserito ancora nessun paziente\"}),0===F.length&&a.length>0&&!C&&Object(N.jsx)(r.a,{variant:\"warning\",children:\"Nessun paziente soddisfa i parametri di ricerca\"})]})}),Object(N.jsx)(j.a,{className:\"d-flex flex-wrap justify-content-center mt-auto\",children:0!==a.length&&Object(N.jsx)(f.a,{itemsCount:F.length,itemsPerPage:10,currentPage:S,setCurrentPage:k,alwaysShown:!0})})]})})})})})}}}]);","name":"static/js/31.2620dba0.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","ShowPatients","react__WEBPACK_IMPORTED_MODULE_0__","react_bootstrap__WEBPACK_IMPORTED_MODULE_1__","react_bootstrap__WEBPACK_IMPORTED_MODULE_2__","react_bootstrap__WEBPACK_IMPORTED_MODULE_3__","react_bootstrap__WEBPACK_IMPORTED_MODULE_4__","react_bootstrap__WEBPACK_IMPORTED_MODULE_5__","react_bootstrap__WEBPACK_IMPORTED_MODULE_6__","react_bootstrap__WEBPACK_IMPORTED_MODULE_7__","react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__","react_router_dom__WEBPACK_IMPORTED_MODULE_9__","firebase_firestore__WEBPACK_IMPORTED_MODULE_10__","_config_firebase_config__WEBPACK_IMPORTED_MODULE_11__","_context_AuthContext__WEBPACK_IMPORTED_MODULE_12__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_13__","react_router_bootstrap__WEBPACK_IMPORTED_MODULE_14__","_Progress_PatientPreview__WEBPACK_IMPORTED_MODULE_15__","react_spinners__WEBPACK_IMPORTED_MODULE_16__","_Utilities_Pagination__WEBPACK_IMPORTED_MODULE_17__","_Utilities_Spinner__WEBPACK_IMPORTED_MODULE_18__","_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_19__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__","currentUser","Object","patients","setPatients","searchInput","setSearchInput","progress","setProgress","currentPage","setCurrentPage","error","setError","success","setSuccess","navigate","async","currentUserData","docs","find","doc","data","email","cfPazienti","pazienti","patientsData","cf","patientQuery","patientSnapshot","empty","patientData","console","message","log","getPatients","filtered","filter","patient","toLowerCase","nome","includes","cognome","cf_paz","children","className","style","background","backgroundSize","minHeight","padding","marginTop","marginBottom","borderRadius","boxShadow","borderLeft","borderTop","fontFamily","marginLeft","to","height","width","variant","icon","color","margin","onClose","dismissible","loading","position","top","left","transform","zIndex","expand","Control","type","placeholder","value","onChange","e","target","onClick","replace","marginRight","map","id","nomePaziente","cognomePaziente","codiceFiscalePaziente","length","itemsCount","itemsPerPage","alwaysShown"],"sources":["static/js/31.2620dba0.chunk.js"],"mappings":"CAACA,KAAgC,0BAAIA,KAAgC,2BAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAEnF,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACSC,EAAoBE,EAAEH,EAAqB,WAAW,WAAa,OAAOI,CAAc,IAClG,IAAIC,EAAqCJ,EAAoB,GAEzDK,EAA+CL,EAAoB,KACnEM,EAA+CN,EAAoB,KACnEO,EAA+CP,EAAoB,KACnEQ,EAA+CR,EAAoB,KACnES,EAA+CT,EAAoB,IACnEU,EAA+CV,EAAoB,KACnEW,EAA+CX,EAAoB,KACnEY,EAAyDZ,EAAoB,IAC7Ea,EAAgDb,EAAoB,GACpEc,EAAmDd,EAAoB,IACvEe,EAAwDf,EAAoB,IAC5EgB,EAAqDhB,EAAoB,IACzEiB,EAA+DjB,EAAoB,IACnFkB,EAAuDlB,EAAoB,IAE3EmB,EAAyDnB,EAAoB,KAC7EoB,EAA+CpB,EAAoB,KACnEqB,EAAsDrB,EAAoB,KAC1EsB,EAAmDtB,EAAoB,IACvEuB,EAAkEvB,EAAoB,IACtFwB,EAAkDxB,EAAoB,GAE/F,SAASG,IAAe,MAAKsB,YAACA,GAAaC,OAAOV,EAAoE,EAA3EU,IAAsFC,EAASC,GAAaF,OAAOtB,EAA6C,SAApDsB,CAAuD,KAAUG,EAAYC,GAAgBJ,OAAOtB,EAA6C,SAApDsB,CAAuD,KAAUK,EAASC,GAAaN,OAAOtB,EAA6C,SAApDsB,EAAuD,IAAqCO,EAAYC,GAAgBR,OAAOtB,EAA6C,SAApDsB,CAAuD,IAASS,EAAMC,GAAUV,OAAOtB,EAA6C,SAApDsB,CAAuD,KAAUW,EAAQC,GAAYZ,OAAOtB,EAA6C,SAApDsB,CAAuD,IAAUa,EAASb,OAAOb,EAAmE,EAA1Ea,GAA+EA,OAAOtB,EAA8C,UAArDsB,EAAwD,KAAuBc,WAAUR,GAAY,GAAM,IAAI,MAAyQS,SAA/Of,OAAOZ,EAAkE,EAAzEY,CAA4EA,OAAOZ,EAAqE,EAA5EY,CAA+EX,EAAkE,EAAE,WAA8C2B,KAAKC,MAAKC,GAAKA,EAAIC,OAAOC,QAAQrB,EAAYqB,QAAO,GAAGL,EAAgB,CAAC,MAAiDM,EAA7BN,EAAgBI,OAAsCG,UAAU,GAASC,EAAa,GAAG,IAAI,MAAMC,KAAMH,EAAW,CAAC,MAAMI,EAAazB,OAAOZ,EAAgE,EAAvEY,CAA0EA,OAAOZ,EAAqE,EAA5EY,CAA+EX,EAAkE,EAAE,SAASW,OAAOZ,EAAgE,EAAvEY,CAA0E,SAAS,KAAKwB,IAAKhB,EAAe,GAAG,IAAI,MAAMkB,QAAsB1B,OAAOZ,EAAkE,EAAzEY,CAA4EyB,GAAc,IAAIC,EAAgBC,MAAM,CAAC,MAAMC,EAAYF,EAAgBV,KAAK,GAAGG,OAAOI,EAAapD,KAAKyD,EAAa,CAAC,CAAC,MAAMnB,GAAOoB,QAAQpB,MAAM,wCAAwCA,EAAMqB,QAAS,CAAC,CAAC5B,EAAYqB,EAAc,MAAMM,QAAQE,IAAI,oDAAsD,CAAC,MAAMtB,GAAOoB,QAAQpB,MAAM,wCAAwCA,EAAMqB,QAAS,CAACxB,GAAY,EAAM,EAAG0B,EAAa,GAAG,CAACjC,IAAc,MAAMkC,EAAShC,EAASiC,QAAOC,GAAqC,KAA5BhC,EAAYiC,eAAoBD,EAAQE,KAAKD,cAAcE,SAASnC,EAAYiC,gBAAgBD,EAAQI,QAAQH,cAAcE,SAASnC,EAAYiC,gBAAgBD,EAAQK,OAAOJ,cAAcE,SAASnC,EAAYiC,iBAAgB,OAAc,IAAX/B,EAAoCL,OAAOF,EAAqD,IAA5DE,CAA+DJ,EAAkE,EAAE,CAAC,GAAuBI,OAAOF,EAAqD,IAA5DE,CAA+DF,EAA0D,SAAE,CAAC2C,UAAoB,IAAXpC,GAA+BL,OAAOF,EAAqD,IAA5DE,CAA+Dd,EAAwE,EAAE,CAACwD,UAAU,mBAAmBC,MAAM,CAACC,WAAW,iGAAiGC,eAAe,QAAQC,UAAU,UAAUC,QAAQ,GAAGN,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+Dd,EAAwE,EAAE,CAACwD,UAAU,+BAA+BD,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+Dd,EAAwE,EAAE,CAACwD,UAAU,qCAAqCC,MAAM,CAACG,UAAU,IAAIE,UAAU,IAAIP,SAAsBzC,OAAOF,EAAsD,KAA7DE,CAAgErB,EAA8D,EAAE,CAAC+D,UAAU,2BAA2BC,MAAM,CAACK,UAAU,GAAGC,aAAa,GAAGC,aAAa,GAAGC,UAAU,oCAAoCC,WAAW,kCAAkCC,UAAU,mCAAmCZ,SAAS,CAAczC,OAAOF,EAAqD,IAA5DE,CAA+D,KAAK,CAAC2C,MAAM,CAACW,WAAW,QAAQN,UAAU,IAAIP,SAAS,oBAAiCzC,OAAOF,EAAqD,IAA5DE,CAA+D,MAAM,CAAC0C,UAAU,wBAAwBD,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+D,MAAM,CAAC0C,UAAU,SAASD,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+D,MAAM,CAAC0C,UAAU,cAAcC,MAAM,CAACK,UAAU,GAAGO,WAAW,IAAId,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+DR,EAAoE,cAAE,CAACgE,GAAG,aAAad,UAAU,UAAUD,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+DpB,EAA8D,EAAE,CAAC+D,MAAM,CAACc,OAAO,GAAGC,MAAM,KAAKC,QAAQ,UAAUlB,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+DT,EAAsF,EAAE,CAACqE,KAAK/D,EAAqF,EAAEgE,MAAM,oBAAoBpD,IAAQR,GAAuBD,OAAOF,EAAqD,IAA5DE,CAA+DnB,EAA8D,EAAE,CAAC8E,QAAQ,SAASlB,SAAShC,IAAQE,GAAsBX,OAAOF,EAAqD,IAA5DE,CAA+DnB,EAA8D,EAAE,CAAC8D,MAAM,CAACmB,OAAO,IAAIH,QAAQ,UAAUI,QAAQ,IAAInD,GAAW,GAAOoD,aAAY,EAAKvB,SAAS9B,IAAuBX,OAAOF,EAAqD,IAA5DE,CAA+DN,EAA8D,EAAE,CAACmE,MAAM,UAAUI,QAAQ5D,EAASsC,MAAM,CAACuB,SAAS,WAAWC,IAAI,MAAMC,KAAK,MAAMC,UAAU,wBAAwBC,OAAO,KAAkBtE,OAAOF,EAAqD,IAA5DE,CAA+Dd,EAAwE,EAAE,CAACyD,MAAM,CAACG,UAAU,KAAKL,SAAsBzC,OAAOF,EAAsD,KAA7DE,CAAgElB,EAA8D,EAAE,CAAC4D,UAAU,kCAAkCC,MAAM,CAACM,aAAa,IAAIR,SAAS,CAAczC,OAAOF,EAAqD,IAA5DE,CAA+DjB,EAA8D,EAAE,CAACwF,OAAO,KAAK7B,UAAU,yBAAyBD,SAAsBzC,OAAOF,EAAsD,KAA7DE,CAAgEd,EAAwE,EAAE,CAACwD,UAAU,SAASD,SAAS,CAAczC,OAAOF,EAAqD,IAA5DE,CAA+Dd,EAAwE,EAAE,CAACwD,UAAU,kBAAkBC,MAAM,CAACM,aAAa,IAAIR,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+DhB,EAA8D,EAAE,CAAC0D,UAAU,SAASD,SAAsBzC,OAAOF,EAAqD,IAA5DE,CAA+Df,EAA8D,EAAEuF,QAAQ,CAACC,KAAK,SAASC,YAAY,WAAWhC,UAAU,OAAO,aAAa,SAASiC,MAAMxE,EAAYyE,SAASC,IAAIrE,EAAe,GAAGJ,EAAeyE,EAAEC,OAAOH,MAAM,QAAsB3E,OAAOF,EAAqD,IAA5DE,CAA+Dd,EAAwE,EAAE,CAACwD,UAAU,gCAAgCC,MAAM,CAACM,aAAa,GAAGF,QAAQ,GAAGN,SAAsBzC,OAAOF,EAAsD,KAA7DE,CAAgEpB,EAA8D,EAAE,CAAC+E,QAAQ,iBAAiBjB,UAAU,YAAYqC,QAAQ,IAAIlE,EAAS,sBAAsB,CAACmE,SAAQ,IAAOvC,SAAS,CAAczC,OAAOF,EAAqD,IAA5DE,CAA+DT,EAAsF,EAAE,CAACqE,KAAK/D,EAAgF,EAAE8C,MAAM,CAACsC,YAAY,KAAK,+BAA+BhD,EAASiD,KAAI/C,GAAsBnC,OAAOF,EAAqD,IAA5DE,CAA+DP,EAAwE,EAAE,CAAC0F,GAAGhD,EAAQgD,GAAGC,aAAajD,EAAQE,KAAKgD,gBAAgBlD,EAAQI,QAAQ+C,sBAAsBnD,EAAQK,QAAQL,EAAQf,SAA0B,IAAlBnB,EAASsF,SAAalF,GAAuBL,OAAOF,EAAqD,IAA5DE,CAA+DnB,EAA8D,EAAE,CAAC8E,QAAQ,UAAUlB,SAAS,4CAA8D,IAAlBR,EAASsD,QAAYtF,EAASsF,OAAO,IAAIlF,GAAuBL,OAAOF,EAAqD,IAA5DE,CAA+DnB,EAA8D,EAAE,CAAC8E,QAAQ,UAAUlB,SAAS,yDAAsEzC,OAAOF,EAAqD,IAA5DE,CAA+Dd,EAAwE,EAAE,CAACwD,UAAU,kDAAkDD,SAA2B,IAAlBxC,EAASsF,QAAyBvF,OAAOF,EAAqD,IAA5DE,CAA+DL,EAAqE,EAAE,CAAC6F,WAAWvD,EAASsD,OAAOE,aAAj5R,GAA86RlF,YAAYA,EAAYC,eAAeA,EAAekF,aAAY,gBAAoB,CAE35S"},"input":"(this[\"webpackJsonpyourfoodcoach\"] = this[\"webpackJsonpyourfoodcoach\"] || []).push([[31],{\n\n/***/ 507:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ShowPatients; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(309);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(187);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(310);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(341);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(335);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(325);\n/* harmony import */ var react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(14);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(7);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29);\n/* harmony import */ var _config_firebase_config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(37);\n/* harmony import */ var _context_AuthContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(30);\n/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(20);\n/* harmony import */ var react_router_bootstrap__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(13);\n/* harmony import */ var react_router_bootstrap__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _Progress_PatientPreview__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(405);\n/* harmony import */ var react_spinners__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(303);\n/* harmony import */ var _Utilities_Pagination__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(321);\n/* harmony import */ var _Utilities_Spinner__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(80);\n/* harmony import */ var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(19);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(1);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__);\nfunction ShowPatients(){const{currentUser}=Object(_context_AuthContext__WEBPACK_IMPORTED_MODULE_12__[/* useAuth */ \"b\"])();const[patients,setPatients]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]);const[searchInput,setSearchInput]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");const[progress,setProgress]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);const patientsPerPage=10;const[currentPage,setCurrentPage]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(1);const[error,setError]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");const[success,setSuccess]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");const navigate=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_9__[/* useNavigate */ \"D\"])();Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(()=>{const getPatients=async()=>{setProgress(true);try{const querySnapshot=await Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* getDocs */ \"f\"])(Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* collection */ \"b\"])(_config_firebase_config__WEBPACK_IMPORTED_MODULE_11__[/* db */ \"b\"],\"users\"));const currentUserData=querySnapshot.docs.find(doc=>doc.data().email===currentUser.email);if(currentUserData){const nutrizionista=currentUserData.data();const cfPazienti=nutrizionista.pazienti||[];const patientsData=[];for(const cf of cfPazienti){const patientQuery=Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* query */ \"i\"])(Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* collection */ \"b\"])(_config_firebase_config__WEBPACK_IMPORTED_MODULE_11__[/* db */ \"b\"],\"users\"),Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* where */ \"m\"])(\"cf_paz\",\"==\",cf));setCurrentPage(1);try{const patientSnapshot=await Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_10__[/* getDocs */ \"f\"])(patientQuery);if(!patientSnapshot.empty){const patientData=patientSnapshot.docs[0].data();patientsData.push(patientData);}}catch(error){console.error(\"Errore durante la query del paziente:\",error.message);}}setPatients(patientsData);}else{console.log(\"Nessun nutrizionista trovato con l'email corrente\");}}catch(error){console.error(\"Errore durante la query degli utenti:\",error.message);}setProgress(false);};getPatients();},[currentUser]);const filtered=patients.filter(patient=>searchInput.toLowerCase()===\"\"||patient.nome.toLowerCase().includes(searchInput.toLowerCase())||patient.cognome.toLowerCase().includes(searchInput.toLowerCase())||patient.cf_paz.toLowerCase().includes(searchInput.toLowerCase()));if(progress===true){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(_Utilities_Spinner__WEBPACK_IMPORTED_MODULE_18__[/* default */ \"a\"],{});}return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"Fragment\"],{children:progress===false&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"modal-fullscreen\",style:{background:\"linear-gradient(123deg, rgba(247,209,98,1) 30%, rgba(251,149,96,1) 50%, rgba(254,88,94,1) 70%)\",backgroundSize:\"cover\",minHeight:\"inherit\",padding:0},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"modal-fullscreen text-center\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"d-flex flex-column mx-auto my-auto\",style:{minHeight:450,marginTop:20},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"],{className:\"col-12 col-md-10 mx-auto\",style:{marginTop:20,marginBottom:20,borderRadius:16,boxShadow:\"10px 10px 10px rgba(30,30,30,0.5)\",borderLeft:\"solid 1px rgba(255,255,255,0.8)\",borderTop:\"solid 1px rgba(255,255,255,0.8)\"},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(\"h2\",{style:{fontFamily:\"Arial\",marginTop:10},children:\"I tuoi pazienti\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(\"div\",{className:\"d-flex my-auto col-12\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(\"div\",{className:\"col-12\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(\"div\",{className:\"float-start\",style:{marginTop:10,marginLeft:20},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_router_bootstrap__WEBPACK_IMPORTED_MODULE_14__[\"LinkContainer\"],{to:\"/dashboard\",className:\"my-auto\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"],{style:{height:40,width:100},variant:\"warning\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_13__[/* FontAwesomeIcon */ \"a\"],{icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_19__[/* faAngleLeft */ \"a\"],color:\"black\"})})})})})}),error&&!patients&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{variant:\"danger\",children:error}),success&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{style:{margin:20},variant:\"primary\",onClose:()=>setSuccess(false),dismissible:true,children:success}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_spinners__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"],{color:\"#eb6164\",loading:progress,style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:1}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{style:{minHeight:500},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"],{className:\"d-flex col-12 col-md-12 mx-auto\",style:{marginBottom:20},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"],{expand:\"lg\",className:\"justify-content-evenly\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsxs\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"col-12\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"col-12 col-md-6\",style:{marginBottom:10},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"],{className:\"d-flex\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"].Control,{type:\"search\",placeholder:\"Cerca...\",className:\"me-2\",\"aria-label\":\"Search\",value:searchInput,onChange:e=>{setCurrentPage(1);setSearchInput(e.target.value);}})})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"col-6 col-md-3 d-inline-block\",style:{marginBottom:10,padding:0},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"],{variant:\"outline-danger\",className:\"flex-wrap\",onClick:()=>navigate(\"/inserisci-paziente\",{replace:true}),children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_13__[/* FontAwesomeIcon */ \"a\"],{icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_19__[/* faPlus */ \"q\"],style:{marginRight:5}}),\"Inserisci paziente\"]})})]})}),filtered.map(patient=>/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(_Progress_PatientPreview__WEBPACK_IMPORTED_MODULE_15__[/* default */ \"a\"],{id:patient.id,nomePaziente:patient.nome,cognomePaziente:patient.cognome,codiceFiscalePaziente:patient.cf_paz},patient.email)),patients.length===0&&!progress&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{variant:\"warning\",children:\"Non hai inserito ancora nessun paziente\"}),filtered.length===0&&patients.length>0&&!progress&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{variant:\"warning\",children:\"Nessun paziente soddisfa i parametri di ricerca\"})]})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],{className:\"d-flex flex-wrap justify-content-center mt-auto\",children:patients.length!==0&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__[\"jsx\"])(_Utilities_Pagination__WEBPACK_IMPORTED_MODULE_17__[/* default */ \"a\"],{itemsCount:filtered.length,itemsPerPage:patientsPerPage,currentPage:currentPage,setCurrentPage:setCurrentPage,alwaysShown:true})})]})})})})});}\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/angelamariaselvaggi/Desktop/unimeri/Tesi/Applicazione/APP MERI/src/Components/Patient/ShowPatients.js"],"names":["ShowPatients","currentUser","useAuth","patients","setPatients","useState","searchInput","setSearchInput","progress","setProgress","patientsPerPage","currentPage","setCurrentPage","error","setError","success","setSuccess","navigate","useNavigate","useEffect","getPatients","querySnapshot","getDocs","collection","db","currentUserData","docs","find","doc","data","email","nutrizionista","cfPazienti","pazienti","patientsData","cf","patientQuery","query","where","patientSnapshot","empty","patientData","push","console","message","log","filtered","filter","patient","toLowerCase","nome","includes","cognome","cf_paz","_jsx","Spinner","_Fragment","children","Container","className","style","background","backgroundSize","minHeight","padding","marginTop","_jsxs","Card","marginBottom","borderRadius","boxShadow","borderLeft","borderTop","fontFamily","marginLeft","LinkContainer","to","Button","height","width","variant","FontAwesomeIcon","icon","faAngleLeft","color","Alert","margin","onClose","dismissible","SyncLoader","loading","position","top","left","transform","zIndex","ListGroup","Navbar","expand","InputGroup","Form","Control","type","placeholder","value","onChange","e","target","onClick","replace","faPlus","marginRight","map","PatientPreview","id","nomePaziente","cognomePaziente","codiceFiscalePaziente","length","Pagination","itemsCount","itemsPerPage","alwaysShown"],"mappings":"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","file":"x","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Alert, Button, Card, Form, InputGroup, ListGroup, Navbar } from \"react-bootstrap\";\nimport Container from \"react-bootstrap/Container\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\nimport { db } from \"../../config/firebase-config\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport PatientPreview from \"../Progress/PatientPreview\";\nimport { SyncLoader } from \"react-spinners\";\nimport Pagination from \"../Utilities/Pagination\";\nimport Spinner from \"../Utilities/Spinner\";\nimport {faAngleLeft, faPlus} from \"@fortawesome/free-solid-svg-icons\";\n\nexport default function ShowPatients() {\n  const { currentUser } = useAuth();\n  const [patients, setPatients] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [progress, setProgress] = useState(true);\n  const patientsPerPage = 10;\n  const [currentPage, setCurrentPage] = useState(1);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    const getPatients = async () => {\n      setProgress(true);\n\n      try {\n        const querySnapshot = await getDocs(collection(db, \"users\"));\n        const currentUserData = querySnapshot.docs.find((doc) => doc.data().email === currentUser.email);\n\n        if (currentUserData) {\n          const nutrizionista = currentUserData.data();\n          const cfPazienti = nutrizionista.pazienti || [];\n\n          const patientsData = [];\n\n          for (const cf of cfPazienti) {\n            const patientQuery = query(collection(db, \"users\"), where(\"cf_paz\", \"==\", cf));\n            setCurrentPage(1);\n            try {\n              const patientSnapshot = await getDocs(patientQuery);\n\n              if (!patientSnapshot.empty) {\n                const patientData = patientSnapshot.docs[0].data();\n                patientsData.push(patientData);\n              } \n            } catch (error) {\n              console.error(\"Errore durante la query del paziente:\", error.message);\n            }\n          }\n\n          setPatients(patientsData);\n        } else {\n          console.log(\"Nessun nutrizionista trovato con l'email corrente\");\n        }\n      } catch (error) {\n        console.error(\"Errore durante la query degli utenti:\", error.message);\n      }\n\n      setProgress(false);\n    };\n\n    getPatients();\n  }, [currentUser]);\n\n  const filtered = patients.filter(\n    (patient) =>\n      searchInput.toLowerCase() === \"\" ||\n      patient.nome.toLowerCase().includes(searchInput.toLowerCase()) ||\n      patient.cognome.toLowerCase().includes(searchInput.toLowerCase()) ||\n      patient.cf_paz.toLowerCase().includes(searchInput.toLowerCase())\n  );\n  if (progress === true) {\n    return <Spinner/>;\n}\n  return (\n    <>\n      {progress === false && (\n        <Container className={\"modal-fullscreen\"}\n        style={{\n          background: \"linear-gradient(123deg, rgba(247,209,98,1) 30%, rgba(251,149,96,1) 50%, rgba(254,88,94,1) 70%)\",\n          backgroundSize: \"cover\",\n          minHeight: \"inherit\",\n          padding: 0\n      }}>\n          <Container className={\"modal-fullscreen text-center\"}>\n          <Container className={\"d-flex flex-column mx-auto my-auto\"}\n                    style={{minHeight: 450, marginTop: 20}}>\n            <Card className={\"col-12 col-md-10 mx-auto\"}\n                  style={{\n                    marginTop: 20,\n                    marginBottom: 20,\n                    borderRadius: 16,\n                    boxShadow: \"10px 10px 10px rgba(30,30,30,0.5)\",\n                    borderLeft: \"solid 1px rgba(255,255,255,0.8)\",\n                    borderTop: \"solid 1px rgba(255,255,255,0.8)\"\n                }}>\n                \n              <h2 style={{fontFamily: \"Arial\", marginTop: 10}}>I tuoi pazienti</h2>\n              <div className={\"d-flex my-auto col-12\"}>\n                                    <div className={\"col-12\"}>\n                                        <div className={\"float-start\"}\n                                             style={{marginTop: 10, marginLeft: 20}}>\n                                            <LinkContainer to=\"/dashboard\"\n                                                           className={\"my-auto\"}>\n                                                <Button style={{height: 40, width: 100}}\n                                                        variant={\"warning\"}\n                                                ><FontAwesomeIcon icon={faAngleLeft}\n                                                                  color={\"black\"}/></Button>\n                                            </LinkContainer>\n                                        </div>\n                                    </div>\n                                </div>\n                                {error && !patients && <Alert variant=\"danger\">{error}</Alert>}\n                            {success && <Alert style={{margin: 20}}\n                                               variant=\"primary\"\n                                               onClose={() => setSuccess(false)}\n                                               dismissible={true}>{success}</Alert>}\n              <SyncLoader color=\"#eb6164\" loading={progress} \n                          style={{\n                            position: \"absolute\",\n                            top: \"50%\",\n                            left: \"50%\",\n                            transform: \"translate(-50%, -50%)\",\n                            zIndex: 1\n                        }}/>\n              <Container style={{minHeight: 500}}>\n              <ListGroup className={\"d-flex col-12 col-md-12 mx-auto\"}\n                                           style={{\n                                               marginBottom: 20\n                                           }}>\n                  <Navbar expand=\"lg\"\n                          className={\"justify-content-evenly\"}>\n                      <Container className={\"col-12\"}>\n                          <Container className={\"col-12 col-md-6\"}\n                                      style={{marginBottom: 10}}>\n                              <InputGroup className=\"d-flex\">\n                                  <Form.Control\n                                      type=\"search\"\n                                      placeholder={\"Cerca...\"}\n                                      className={\"me-2\"}\n                                      aria-label=\"Search\"\n                                      value={searchInput}\n                                      onChange={(e) => {\n                                          setCurrentPage(1);\n                                          setSearchInput(e.target.value);\n                                      }}\n                                  />\n                              </InputGroup>\n                          </Container>\n                         \n                          <Container className={\"col-6 col-md-3 d-inline-block\"}\n                                      style={{marginBottom: 10, padding: 0}}>\n                              <Button variant=\"outline-danger\"\n                                      className={\"flex-wrap\"}\n                                      onClick={() => navigate(\"/inserisci-paziente\", {replace: true})}><FontAwesomeIcon icon={faPlus}\n                                                                                                                style={{marginRight: 5}}/>Inserisci paziente</Button>\n\n                          </Container>\n                      </Container>\n                  </Navbar>\n                  {filtered.map((patient) => (\n                  <PatientPreview\n                    key={patient.email}\n                    id={patient.id}\n                    nomePaziente={patient.nome}\n                    cognomePaziente={patient.cognome}\n                    codiceFiscalePaziente={patient.cf_paz}\n                  />\n                ))}\n                 {patients.length === 0 && !progress && <Alert variant={\"warning\"}>Non hai inserito ancora nessun paziente</Alert>}\n                {filtered.length === 0 && patients.length > 0 && !progress && (\n                  <Alert variant={\"warning\"}>Nessun paziente soddisfa i parametri di ricerca</Alert>\n                )}\n              </ListGroup>\n              </Container>\n              <Container className={\"d-flex flex-wrap justify-content-center mt-auto\"}>\n                                {patients.length !== 0 && <Pagination\n                                    itemsCount={filtered.length}\n                                    itemsPerPage={patientsPerPage}\n                                    currentPage={currentPage}\n                                    setCurrentPage={setCurrentPage}\n                                    alwaysShown={true}\n                                />}\n              </Container>\n            </Card>\n            </Container>\n          </Container>\n        </Container>\n      )}\n    </>\n  );\n}\n"]}}