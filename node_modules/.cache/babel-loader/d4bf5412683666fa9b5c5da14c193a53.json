{"ast":null,"code":"import { auth, db } from \"../../config/firebase-config.js\";\nimport { doc } from \"firebase/firestore\";\nconst DeleteAccount = async (password, currentUser) => {\n  try {\n    if (!currentUser) {\n      throw new Error('Utente non autenticato');\n    }\n\n    // Verifica la password dell'utente attuale\n    const credentials = auth.EmailAuthProvider.credential(currentUser.email, currentUser.password);\n    const credential = promptForCredentials();\n\n    //await currentUser.reauthenticateWithCredential(credentials);\n    auth.reauthenticateWithCredential(user, credential).then(() => {\n      // User re-authenticated.\n    }).catch(error => {\n      // An error ocurred\n      // ...\n    });\n    deleteUser(user).then(() => {\n      // User deleted.\n    }).catch(error => {\n      // An error ocurred\n      // ...\n    });\n    // Elimina l'utente da Firestore\n    await doc(db, 'users', currentUser.uid).delete();\n\n    // Restituisci true se l'eliminazione è avvenuta con successo\n    return true;\n  } catch (error) {\n    console.error('Errore durante l\\'eliminazione dell\\'account', error);\n    throw error;\n  }\n};\n_c = DeleteAccount;\nexport default DeleteAccount;\nvar _c;\n$RefreshReg$(_c, \"DeleteAccount\");","map":{"version":3,"names":["auth","db","doc","DeleteAccount","password","currentUser","Error","credentials","EmailAuthProvider","credential","email","promptForCredentials","reauthenticateWithCredential","user","then","catch","error","deleteUser","uid","delete","console","_c","$RefreshReg$"],"sources":["/Users/angelamariaselvaggi/Desktop/unimeri/Tesi/Applicazione/APP MERI/src/Components/Authentication/DeleteAccount.js"],"sourcesContent":["import { auth, db } from \"../../config/firebase-config.js\";\nimport { doc } from \"firebase/firestore\";\n\nconst DeleteAccount = async (password, currentUser) => {\n  try {\n    if (!currentUser) {\n      throw new Error('Utente non autenticato');\n    }\n\n    // Verifica la password dell'utente attuale\n    const credentials = auth.EmailAuthProvider.credential(currentUser.email, currentUser.password);\n    const credential = promptForCredentials();\n\n    //await currentUser.reauthenticateWithCredential(credentials);\n    auth.reauthenticateWithCredential(user, credential).then(() => {\n        // User re-authenticated.\n      }).catch((error) => {\n        // An error ocurred\n        // ...\n      });\n      deleteUser(user).then(() => {\n        // User deleted.\n      }).catch((error) => {\n        // An error ocurred\n        // ...\n      });\n    // Elimina l'utente da Firestore\n    await doc(db, 'users', currentUser.uid).delete();\n\n    // Restituisci true se l'eliminazione è avvenuta con successo\n    return true;\n  } catch (error) {\n    console.error('Errore durante l\\'eliminazione dell\\'account', error);\n    throw error;\n  }\n};\n\nexport default DeleteAccount;\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,EAAE,QAAQ,iCAAiC;AAC1D,SAASC,GAAG,QAAQ,oBAAoB;AAExC,MAAMC,aAAa,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,WAAW,KAAK;EACrD,IAAI;IACF,IAAI,CAACA,WAAW,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;IAC3C;;IAEA;IACA,MAAMC,WAAW,GAAGP,IAAI,CAACQ,iBAAiB,CAACC,UAAU,CAACJ,WAAW,CAACK,KAAK,EAAEL,WAAW,CAACD,QAAQ,CAAC;IAC9F,MAAMK,UAAU,GAAGE,oBAAoB,CAAC,CAAC;;IAEzC;IACAX,IAAI,CAACY,4BAA4B,CAACC,IAAI,EAAEJ,UAAU,CAAC,CAACK,IAAI,CAAC,MAAM;MAC3D;IAAA,CACD,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;MAClB;MACA;IAAA,CACD,CAAC;IACFC,UAAU,CAACJ,IAAI,CAAC,CAACC,IAAI,CAAC,MAAM;MAC1B;IAAA,CACD,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;MAClB;MACA;IAAA,CACD,CAAC;IACJ;IACA,MAAMd,GAAG,CAACD,EAAE,EAAE,OAAO,EAAEI,WAAW,CAACa,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC;;IAEhD;IACA,OAAO,IAAI;EACb,CAAC,CAAC,OAAOH,KAAK,EAAE;IACdI,OAAO,CAACJ,KAAK,CAAC,8CAA8C,EAAEA,KAAK,CAAC;IACpE,MAAMA,KAAK;EACb;AACF,CAAC;AAACK,EAAA,GAhCIlB,aAAa;AAkCnB,eAAeA,aAAa;AAAC,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}